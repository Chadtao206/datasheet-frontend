{"version":3,"sources":["components/LoadingSpinner.js","pages/Home.js","App.js","context/UserContext.js","index.js"],"names":["LoadingSpinner","className","baseURL","productData","product_id","product_name","product_type","product_sku","product_price","short_description","long_description","info_description","tech_specs","defaultImage","images","thumbnails","datasheet_benefits","datasheet_features","device_compatibility","package_content","warranty","certifications","rating","upc_code","unit_height","unit_width","unit_depth","unit_weight","height","width","depth","weight","contact_name","contact_dep","contact_phone","contact_email","footer_company","footer_address","footer_email","footer_phone","footer_fax","footer_site","console","log","App","props","downloadPdf","setState","loading","axios","post","then","get","responseType","res","pdfBlob","Blob","data","type","saveAs","fetchData","searchParams","URL","window","location","splitProductDescription","desc","html","array","split","DOMParser","parseFromString","body","textContent","regexValid","RegExp","e","replace","stripLinks","handleData","product","site","entityId","name","customFields","edges","forEach","field","node","value","fields","getUpcCode","getUnitDimensions","findCertifications","findRating","sku","prices","price","description","image","index","img320px","generateThumbnails","benefits","item","findBenefits","features","productLine","axtionSeries","featureList","icons","domain","iconsrc","spaceToDash","url","toLowerCase","push","findFeatureIcons","findFeatures","findPackageContent","findDeviceCompatibility","params","store_url","id","token","Object","keys","key","Error","storeUrl","graphQLUrl","origin","graphQLQuery","fetch","method","credentials","mode","headers","Authorization","Accept","JSON","stringify","query","json","getProductAndSiteInfo","document","getElementById","innerHTML","footer","length","unit","renderProduct","renderPage","catch","componentDidMount","state","this","src","alt","onClick","Component","path","exact","component","Home","UserContext","createContext","children","useState","user","setUser","Provider","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.6f29f180.chunk.js","sourcesContent":["import React from 'react';\r\nimport './Loadingspinner.css';\r\n\r\nconst LoadingSpinner = () => {\r\n    return (\r\n        <div className=\"sk-circle\">\r\n            <div className=\"sk-circle1 sk-child\"></div>\r\n            <div className=\"sk-circle2 sk-child\"></div>\r\n            <div className=\"sk-circle3 sk-child\"></div>\r\n            <div className=\"sk-circle4 sk-child\"></div>\r\n            <div className=\"sk-circle5 sk-child\"></div>\r\n            <div className=\"sk-circle6 sk-child\"></div>\r\n            <div className=\"sk-circle7 sk-child\"></div>\r\n            <div className=\"sk-circle8 sk-child\"></div>\r\n            <div className=\"sk-circle9 sk-child\"></div>\r\n            <div className=\"sk-circle10 sk-child\"></div>\r\n            <div className=\"sk-circle11 sk-child\"></div>\r\n            <div className=\"sk-circle12 sk-child\"></div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default LoadingSpinner","import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { saveAs } from \"file-saver\";\r\nimport LoadingSpinner from \"../components/LoadingSpinner\";\r\nimport \"../App.css\";\r\nimport \"../components/Datasheet.css\";\r\n\r\nconst baseURL =\r\n  process.env.NODE_ENV === \"production\"\r\n    ? \"https://datasheet-bkendv1.herokuapp.com\"\r\n    : \"http://localhost:3001\";\r\n\r\nlet productData = {\r\n  product_id: 0,\r\n  product_name: \"\",\r\n  product_type: \"\",\r\n  product_sku: \"\",\r\n  product_price: \"\",\r\n  short_description: \"\",\r\n  long_description: \"\",\r\n  info_description: \"\",\r\n  tech_specs: \"\",\r\n  defaultImage: [],\r\n  images: [],\r\n  thumbnails: \"\",\r\n  datasheet_benefits: \"\",\r\n  datasheet_features: \"\",\r\n  device_compatibility: \"\",\r\n  package_content: \"\",\r\n  warranty: \"\",\r\n  certifications: \"\",\r\n  rating: \"\",\r\n  upc_code: \"\",\r\n  unit_height: \"\",\r\n  unit_width: \"\",\r\n  unit_depth: \"\",\r\n  unit_weight: \"\",\r\n  height: {},\r\n  width: {},\r\n  depth: {},\r\n  weight: {},\r\n  contact_name: \"The Joy Factory\",\r\n  contact_dep: \"Sales Team\",\r\n  contact_phone: \"949.382.1552\",\r\n  contact_email: \"sales@thejoyfactory.com\",\r\n  footer_company: \"The Joy Factory Inc.\",\r\n  footer_address: \"16811 Hale Ave Bldg D, Irvine, CA 92606\",\r\n  footer_email: \"sales@thejoyfactory.com\",\r\n  footer_phone: \"949.216.8869\",\r\n  footer_fax: \"949.216.8869\",\r\n  footer_site: \"www.thejoyfactory.com\",\r\n};\r\n\r\nconsole.log(productData);\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: 0,\r\n      loading: false,\r\n    };\r\n  }\r\n\r\n  // Use Componenet state data to handle PDF Download\r\n  // createAndDownloadPdf = () => {\r\n  //   axios\r\n  //     .post(`${baseURL}/create-pdf`, this.state)\r\n  //     .then(({ data }) => {\r\n  //       console.log(\"PDF BUFFER\", data);\r\n  //       axios.get(`${baseURL}/fetch-pdf`, { responseType: \"blob\" });\r\n  //     })\r\n  //     .then((res) => {\r\n  //       const pdfBlob = new Blob([res.data], { type: \"application/pdf\" });\r\n  //       saveAs(pdfBlob, \"datasheet-tjf.pdf\");\r\n  //     });\r\n  // };\r\n\r\n  // Currently being used to handle PDF Download\r\n  downloadPdf = () => {\r\n    this.setState({ loading: true });\r\n\r\n    axios\r\n      .post(`${baseURL}/download-pdf`, productData)\r\n      .then(() => axios.get(`${baseURL}/fetch-pdf`, { responseType: \"blob\" }))\r\n      .then((res) => {\r\n        console.log(res);\r\n        const pdfBlob = new Blob([res.data], { type: \"application/pdf\" });\r\n        saveAs(pdfBlob, `datasheet-${productData.product_sku}.pdf`);\r\n        this.setState({ loading: false });\r\n      });\r\n  };\r\n\r\n  // downloadPdf = () => {\r\n  //   fetch(\"/download-pdf\", {\r\n  //     method: \"POST\",\r\n  //     body: JSON.stringify(productData),\r\n  //   }).then((res) => {\r\n  //     res.arrayBuffer().then((res) => {\r\n  //       console.log(res);\r\n  //       const pdfBlob = new Blob([res], { type: \"application/pdf\" });\r\n  //       saveAs(pdfBlob, \"datasheet.pdf\");\r\n  //     });\r\n  //   });\r\n  // }\r\n\r\n  fetchData = () => {\r\n    console.log(\"FetchData started...\");\r\n    const pageUrl = new URL(window.location);\r\n    const searchParams = pageUrl.searchParams;\r\n    console.log(`Search Params: ${searchParams}`);\r\n\r\n    /*\r\n        Utility functions for rendering\r\n    */\r\n\r\n    // Based on the browser locale, provide a localized price\r\n    function formatLocalizedPrice(price) {\r\n      return new Intl.NumberFormat(navigator.language, {\r\n        style: \"currency\",\r\n        currency: price.currencyCode,\r\n      }).format(price.value);\r\n    }\r\n\r\n    // Create a srcset string for responsive images\r\n    function renderSrcset(image) {\r\n      return `${image.img320px} 320w, ${image.img640px} 640w, ${image.img960px} 960w, ${image.img1280px} 1280w`;\r\n    }\r\n\r\n    // Function to strip HTML from product descriptions, leaving just the text\r\n    function stripHtml(html) {\r\n      var doc = new DOMParser().parseFromString(html, \"text/html\");\r\n      return doc.body.textContent || \"\";\r\n    }\r\n\r\n    // Function to strip link tags from product descriptions\r\n    function stripLinks(desc) {\r\n      let cleanDesc = \"\";\r\n      let regexValid = false;\r\n      try {\r\n        // Check if there are links in the Tech Specs Description\r\n        new RegExp(/<a.*?>[^<]*<\\/a>/);\r\n        regexValid = true;\r\n      } catch (e) {\r\n        regexValid = false;\r\n      }\r\n      // If a link is found, also remove the double BR tags\r\n      if (regexValid) {\r\n        let removedFirstBR = desc.replace(/<br><br>/, \"\");\r\n        cleanDesc = removedFirstBR.replace(/<a.*?>[^<]*<\\/a>/g, \"\");\r\n        return cleanDesc;\r\n      } else {\r\n        return desc;\r\n      }\r\n    }\r\n\r\n    function findProductType(fields) {\r\n      fields.forEach((field) => {\r\n        if (field.node.name === \"product_type\") {\r\n          productData.product_type = field.node.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    function findDeviceCompatibility(fields) {\r\n      fields.forEach((field) => {\r\n        if (field.node.name === \"device_compatibility\") {\r\n          let device_compatibility = field.node.value;\r\n          productData.device_compatibility = device_compatibility.replace(\r\n            \",\",\r\n            \",\"\r\n          );\r\n        }\r\n      });\r\n    }\r\n\r\n    function findCertifications(fields) {\r\n      fields.forEach((field) => {\r\n        if (field.node.name === \"certifications\") {\r\n          let certifications = field.node.value;\r\n          productData.certifications = certifications.replace(\",\", \",\");\r\n        }\r\n      });\r\n    }\r\n\r\n    function findRating(fields) {\r\n      fields.forEach((field) => {\r\n        if (field.node.name === \"rating\") {\r\n          let rating = field.node.value;\r\n          productData.rating = rating.replace(\",\", \" | \");\r\n        }\r\n      });\r\n    }\r\n\r\n    function findPackageContent(fields) {\r\n      fields.forEach((field) => {\r\n        if (field.node.name === \"package_content\") {\r\n          productData.package_content = field.node.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    function splitProductDescription(desc) {\r\n      var array = desc.split(\"&lt;!-- split --&gt;\");\r\n      productData.short_description = stripHtml(array[0]);\r\n      productData.long_description = array[1];\r\n      productData.info_description = array[2];\r\n      productData.tech_specs = stripLinks(array[3]);\r\n    }\r\n\r\n    function generateThumbnails(images) {\r\n      let thumbnails = \"\";\r\n      images.forEach((image, index) => {\r\n        if (index !== 0 && index < 4)\r\n          thumbnails += `<img class=\"thumbnail\" src=\"${image.node.img320px}\">`;\r\n      });\r\n      productData.thumbnails = thumbnails;\r\n    }\r\n\r\n    function findBenefits(fields) {\r\n      var benefits;\r\n      fields.forEach((field) => {\r\n        if (field.node.name === \"datasheet_benefits\") {\r\n          benefits = field.node.value;\r\n        }\r\n      });\r\n      var array = benefits.split(\",\");\r\n      array.forEach((item, index) => {\r\n        if (index % 3 === 0) {\r\n          productData.datasheet_benefits += `<tr>`;\r\n        }\r\n        productData.datasheet_benefits += `<td><li>${item}</li></td>`;\r\n        if (index === 2 || index === 5) {\r\n          productData.datasheet_benefits += `</tr>`;\r\n        }\r\n      });\r\n    }\r\n\r\n    function findFeatures(fields) {\r\n      let features;\r\n      let productLine;\r\n      let axtionSeries;\r\n      fields.forEach((field) => {\r\n        if (field.node.name === \"datasheet_features\") {\r\n          features = field.node.value;\r\n        }\r\n      });\r\n      fields.forEach((field) => {\r\n        if (field.node.name === \"product_line\") {\r\n          productLine = field.node.value;\r\n        }\r\n      });\r\n      fields.forEach((field) => {\r\n        if (field.node.name === \"axtion_series\") {\r\n          axtionSeries = field.node.value;\r\n        }\r\n      });\r\n      let featureList = features.split(\",\");\r\n      let icons = findFeatureIcons(featureList, productLine, axtionSeries);\r\n      featureList.forEach((item, index) => {\r\n        if (index % 3 === 0) {\r\n          productData.datasheet_features += `<tr>`;\r\n        }\r\n        productData.datasheet_features += `<td><li class=\"feature-item\"><img class=\"feature-icon\" src=\"${icons[index]}\">${item}</li></td>`;\r\n        if (index === 2 || index === 5) {\r\n          productData.datasheet_features += `</tr>`;\r\n        }\r\n      });\r\n    }\r\n\r\n    function findFeatureIcons(features, productLine, axtionSeries) {\r\n      let domain = \"https://thejoyfactory.com/content/datasheet/icons/\";\r\n      let iconsrc = [];\r\n\r\n      features.forEach((item, index) => {\r\n        let spaceToDash = item.replace(/ /g, \"-\");\r\n        let icon = \"\";\r\n\r\n        if (axtionSeries != null) {\r\n          icon = `${domain}${productLine}-${axtionSeries}-${spaceToDash}.png`;\r\n        } else {\r\n          icon = `${domain}${productLine}-${spaceToDash}.png`;\r\n        }\r\n\r\n        let url = icon.toLowerCase();\r\n        iconsrc.push(url);\r\n      });\r\n      return iconsrc;\r\n    }\r\n\r\n    function getUpcCode(fields) {\r\n      fields.forEach((field) => {\r\n        if (field.node.name === \"upc_code\") {\r\n          productData.upc_code = field.node.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    function getUnitDimensions(fields) {\r\n      fields.forEach((field) => {\r\n        // Get unit height\r\n        if (field.node.name === \"unit_height\") {\r\n          productData.unit_height = field.node.value;\r\n        }\r\n        // Get unit width\r\n        else if (field.node.name === \"unit_width\") {\r\n          productData.unit_width = field.node.value;\r\n        }\r\n        // Get unit depth\r\n        else if (field.node.name === \"unit_depth\") {\r\n          productData.unit_depth = field.node.value;\r\n        }\r\n        // Get unit weight\r\n        else if (field.node.name === \"unit_weight\") {\r\n          productData.unit_weight = field.node.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    // Assign data values into state\r\n    function handleData(data) {\r\n      const product = data.site.product;\r\n      console.log(\"Assigning new values to state...\");\r\n      productData.product_id = product.entityId;\r\n      productData.product_name = product.name;\r\n      findProductType(product.customFields.edges);\r\n      getUpcCode(product.customFields.edges);\r\n      getUnitDimensions(product.customFields.edges);\r\n      findCertifications(product.customFields.edges);\r\n      findRating(product.customFields.edges);\r\n      productData.product_sku = product.sku;\r\n      productData.product_price = product.prices.price.value;\r\n      splitProductDescription(product.description);\r\n      productData.defaultImage = product.defaultImage;\r\n      productData.images = product.images.edges;\r\n      generateThumbnails(product.images.edges);\r\n      findBenefits(product.customFields.edges);\r\n      findFeatures(product.customFields.edges);\r\n      productData.warranty = product.warranty;\r\n      productData.depth = product.depth;\r\n      productData.height = product.height;\r\n      productData.weight = product.weight;\r\n      productData.width = product.width;\r\n      findPackageContent(product.customFields.edges);\r\n      findDeviceCompatibility(product.customFields.edges);\r\n    }\r\n\r\n    /*\r\n        Page rendering logic\r\n    */\r\n    function renderPage(data) {\r\n      // Render the HTML for the product\r\n      console.log(data);\r\n\r\n      const product = data.site.product;\r\n      console.log(product);\r\n\r\n      handleData(data);\r\n\r\n      document.getElementById(\"product\").innerHTML = renderProduct(productData);\r\n    }\r\n\r\n    function renderProduct(product) {\r\n      // Footer\r\n      const footer = `\r\n          <table class=\"footer text-left\">\r\n            <tr>\r\n                <td style=\"width:73%;\">\r\n                  <table>\r\n                  <tr>\r\n                    <td class=\"footer-company\" style=\"width:73%;\">The Joy Factory Inc.</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td class=\"footer-second-desc\">${product.footer_address} <span style=\"color: #d0103a;\">|</span> ${product.footer_email} <span style=\"color: #d0103a;\">|</span> T : ${product.footer_phone} <span style=\"color: #d0103a;\">|</span> F : ${product.footer_fax} <span style=\"color: #d0103a;\">|</span> ${product.footer_site}</td>\r\n                  </tr>\r\n                  </table>     \r\n                </td>\r\n                <td style=\"width:16.5%;\">\r\n                  <table class=\"footer-icons\" style=\"width:100%;\">\r\n                    <tr>\r\n                      <td class=\"footer-image\"><img src=\"https://thejoyfactory.com/content/datasheet/protect.jpg\" alt=\"The Joy Factory Protect Icon\"></td>\r\n                      <td class=\"footer-image\"><img src=\"https://thejoyfactory.com/content/datasheet/secure.jpg\" alt=\"The Joy Factory Secure Icon\"></td>\r\n                      <td class=\"footer-image\"><img src=\"https://thejoyfactory.com/content/datasheet/position.jpg\" alt=\"The Joy Factory Position Icon\"></td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td class=\"footer-image-content\">Protect</td>\r\n                      <td class=\"footer-image-content\">Secure</td>\r\n                      <td class=\"footer-image-content\">Position</td>\r\n                    </tr>\r\n                  </table>\r\n                </td>\r\n                <td align=\"center\" style=\"width:10.5%;\">\r\n                  <img src=\"https://thejoyfactory.com/content/datasheet/logo.png\" alt=\"The Joy Factory logo.\" style=\"width:100px;\">\r\n                </td>\r\n            </tr>\r\n          </table>\r\n          `;\r\n\r\n      // Contact Section - currently not used on customer preview\r\n      const contact = `\r\n          <div class=\"contact-table\" style=\"margin: 10px 0 300px 0; padding: 10px;\">\r\n            <table class=\"contact\" style=\"background: white; width: 100%;\">\r\n              <tr>\r\n                <td class=\"text-center\" style=\"padding: 5px 30px; width: 25%;\">\r\n                  <img src=\"https://thejoyfactory.com/content/datasheet/logo-lg.png\" alt=\"The Joy Factory logo.\" style=\"width:100px;\">\r\n                </td>\r\n                <td class=\"text-left\" style=\"padding: 5px 30px; width: 25%;\">\r\n                  <p style=\"font-size: 1.25rem; font-weight: bold;\">${product.contact_name}</p>\r\n                  <p style=\"font-size: 0.9rem; font-weight: bold;\">${product.contact_dep}</p>\r\n                </td>\r\n                <td class=\"text-left\" style=\"border-left:solid 2px red; padding: 5px 30px; width: 50%;\">\r\n                  <p>Direct Phone Number | ${product.contact_phone}</p>\r\n                  <p>Email Address | ${product.contact_email}</p>\r\n                </td>\r\n              </tr>\r\n            </table>\r\n          </div>\r\n        `;\r\n\r\n      // Render the product into a preview\r\n      return `\r\n          <!-- Start: Page One -->\r\n          <div class=\"page\" id=\"page-one\">\r\n            <table class=\"text-left\">\r\n              <tr>\r\n                <td class=\"product-header\">\r\n                  <h1 class=\"product-name\">${product.product_name}</h1>\r\n                  <p class=\"product-short-desc\">${product.short_description}</p>\r\n                  <hr class=\"hr-short hr-left\">\r\n                  <div class=\"product-sku-price\">\r\n                    <p class=\"product-sku\">SKU: ${product.product_sku}</p>\r\n                    <p class=\"product-price\">MSRP: $${product.product_price}</p>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            </table>\r\n            <table class=\"product-desc-container\">\r\n              <tr>\r\n                <td class=\"product-description\">\r\n                  ${product.long_description}\r\n                  ${product.info_description}\r\n                </td>\r\n                <td class=\"product-images\">\r\n                  ${\r\n                    product.defaultImage\r\n                      ? `<img class=\"default-image\" src=\"${product.defaultImage.img320px}\" alt=\"The Joy Factory product image\">`\r\n                      : \"\"\r\n                  }\r\n                  <p>\r\n                    ${product.thumbnails}\r\n                  </p>\r\n                </td>\r\n              </tr>\r\n            </table>\r\n            <div class=\"benefits\">\r\n               <span class=\"benefits-header\">Benefits</span>\r\n               <br>\r\n               <table>\r\n                  ${product.datasheet_benefits}\r\n               </table>\r\n            </div>\r\n            <div class=\"features\">\r\n               <span class=\"features-header\">Features</span>\r\n               <br>\r\n               <table>\r\n                  ${product.datasheet_features}\r\n               </table>\r\n            </div>\r\n            ${footer}\r\n          </div>\r\n          <!-- End: Page One -->\r\n\r\n          <!-- Start: Page Two -->\r\n          <div class=\"page\" id=\"page-two\">\r\n            <div class=\"tech-specs-header\">\r\n              <p>\r\n                Technical Specifications\r\n                <br>\r\n                <span class=\"underline\"></span>\r\n              </p>\r\n            </div>\r\n            <table class=\"tech-specs-container\">\r\n              <tr>\r\n                <td class=\"tech-specs-image-container\" style=\"padding: 0 25px;\">\r\n                  ${\r\n                    product.images[product.images.length - 1]\r\n                      ? `<img class=\"tech-spec-image\" src=\"${\r\n                          product.images[product.images.length - 1].node\r\n                            .img320px\r\n                        }\" alt=\"The Joy Factory product image\">`\r\n                      : \"\"\r\n                  }\r\n                  <p class=\"disclaimer\" style=\"font-size: 7px;\">The information on this data sheet is subject to change at any time at the discretion of The Joy Factory</p>\r\n                </td>\r\n                <td class=\"tech-specs\">\r\n                  ${product.tech_specs}\r\n                </td>\r\n              </tr>\r\n            </table>\r\n            <div class=\"product-specifications\">\r\n              <table class=\"product-specs-table\">\r\n                <tr>\r\n                  <td class=\"product-info-container\">\r\n                    <div class=\"product-name text-left\">\r\n                      ${product.product_name}\r\n                    </div>\r\n                    <table class=\"product-info-inner-table\">\r\n                      <tr>\r\n                        <div class=\"product-info-group\">\r\n                          <p>SKU: ${product.product_sku}</p>\r\n                          <p>Product type: ${product.product_type}</p>\r\n                          <p>MSRP: $${product.product_price}</p>\r\n                        </div>\r\n                      </tr>\r\n                    </table>\r\n                  </td>\r\n                  <td class=\"product-specs-container\">\r\n                    <table class=\"product-specs-inner-table\">\r\n                      <th class=\"product-specs-title\">Product Specifications</th>\r\n                      <tr>\r\n                        <td>Compatible with: ${\r\n                          product.device_compatibility\r\n                        }</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <td>Product height: ${product.unit_height} in</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <td>Product width: ${product.unit_width} in</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <td>Product thickness: ${product.unit_depth} in</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <td>Product weight: ${product.unit_weight} lb</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <td>Package height: ${product.height.value} ${\r\n        product.height.unit\r\n      }</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <td>Package width: ${product.width.value} ${\r\n        product.width.unit\r\n      }</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <td>Package depth: ${product.depth.value} ${\r\n        product.depth.unit\r\n      }</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <td>Package weight: ${product.weight.value} ${\r\n        product.weight.unit\r\n      }</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <td>UPC: ${product.upc_code}</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <td>Warranty: ${product.warranty}</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <td>Certifications: ${product.certifications}</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <td>Rating: ${product.rating}</td>\r\n                      </tr>\r\n                      <tr>\r\n                        <td>Package content: ${product.package_content}</td>\r\n                      </tr>\r\n                    </table>\r\n                  </td>\r\n                </tr>\r\n              </table>\r\n            </div>\r\n            ${footer}\r\n          </div>\r\n          <!-- End: Page Two -->\r\n        `;\r\n    }\r\n\r\n    function renderPrice(prices) {\r\n      // Render the price component from the supplied prices\r\n      return `<span></span>`;\r\n    }\r\n\r\n    /*\r\n        API fetching\r\n    */\r\n    function getProductAndSiteInfo(params) {\r\n      const storeUrl = new URL(params.store_url);\r\n\r\n      // Use the store's canonical URL which should always resolve\r\n      const graphQLUrl = `${storeUrl.origin}/graphql`;\r\n\r\n      // Set up GraphQL query\r\n      // If specific product IDs were supplied, fetch them, else just get the first few products\r\n      const graphQLQuery = `\r\n        query SingleProduct {\r\n          site {\r\n             product(entityId: ${params.id}) {\r\n              entityId\r\n              brand {\r\n                name\r\n              }\r\n              name\r\n              sku\r\n              path\r\n              description\r\n              height {\r\n                value\r\n                unit\r\n              }\r\n              width {\r\n                value\r\n                unit\r\n              }\r\n              weight {\r\n                value\r\n                unit\r\n              }\r\n              depth {\r\n                value\r\n                unit\r\n              }\r\n              warranty\r\n              customFields {\r\n                edges {\r\n                  node {\r\n                    name\r\n                    value\r\n                  }\r\n                }\r\n              }\r\n              defaultImage {\r\n                img320px: url(width: 320)\r\n                img640px: url(width: 640)\r\n                img960px: url(width: 960)\r\n              }\r\n              images {\r\n                edges {\r\n                  node {\r\n                    img320px:url(width:320)\r\n                  }\r\n                }\r\n              }\r\n              prices {\r\n                price {\r\n                  ...PriceFields\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n          \r\n        fragment PriceFields on Money {\r\n          value\r\n          currencyCode\r\n        }`;\r\n\r\n      // Fetch data from the GraphQL Storefront API\r\n      return fetch(graphQLUrl, {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        mode: \"cors\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${params.token}`,\r\n        },\r\n        Accept: \"application/json\",\r\n        body: JSON.stringify({ query: graphQLQuery }),\r\n      })\r\n        .then((res) => res.json())\r\n        .then((res) => res.data);\r\n    }\r\n\r\n    // Set up default params (token expires 1/15/2038)hh\r\n    let params = {\r\n      store_url: \"https://thejoyfactory.com\",\r\n      id: null,\r\n      token:\r\n        \"eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NiJ9.eyJjaWQiOjEsImNvcnMiOlsiaHR0cHM6Ly9kYXRhc2hlZXQtYmtlbmR2MS5oZXJva3VhcHAuY29tIl0sImVhdCI6MjE0NjAwMjU3OCwiaWF0IjoxNjUxNzU2NzYxLCJpc3MiOiJCQyIsInNpZCI6MTAwMDY3NjI0MCwic3ViIjoicXNzNHVsazZnZTYyNTRybWl2YWU3amJodjZ4bDBqeCIsInN1Yl90eXBlIjoyLCJ0b2tlbl90eXBlIjoxfQ.LSIix5r5BWeMQRHpMIqQGqFND9ejEVmOlNNJ8qasP7-nVKgFXI2sdYjASZmlOEN4ULCOPUMjgWLeiBkqq_QfZA\",\r\n    };\r\n\r\n    // Fill in supplied URL params\r\n    Object.keys(params).forEach(function (key) {\r\n      if (searchParams.get(key)) {\r\n        params[key] = searchParams.get(key);\r\n      }\r\n    });\r\n    console.log(params.id);\r\n    // Use testdata.json file as testData\r\n    // renderPage(testData);\r\n\r\n    // Check for required parameters, throw an error if they're not found\r\n    if (!(params.store_url && params.token)) {\r\n      throw new Error(\r\n        \"At least one of the required URL parameters (Store URL, Token) was not supplied or was invalid\"\r\n      );\r\n    } else {\r\n      // It seems like the required parameters were supplied, try to load the product data from the Storefront API\r\n      getProductAndSiteInfo(params)\r\n        .then((data) => {\r\n          // With our data loaded, render the product listing\r\n\r\n          renderPage(data);\r\n        })\r\n        .catch((e) => {\r\n          // Some error was encountered\r\n          console.log(`Error: failed to fetch product data.`);\r\n          throw e;\r\n        });\r\n    }\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    this.fetchData();\r\n  };\r\n\r\n  render() {\r\n    const loading = this.state.loading;\r\n\r\n    return (\r\n      <div className=\"App container my-5\">\r\n        <div className=\"LoadingSpinner-wrapper\">\r\n          <img\r\n            className=\"download-icon\"\r\n            src=\"https://thejoyfactory.com/content/datasheet/icons/data-sheet-icon-01.png\"\r\n            alt=\"icon\"\r\n          />\r\n          <button className=\"btn btn-primary\" onClick={this.downloadPdf}>\r\n            Download PDF\r\n          </button>\r\n          {loading ? <LoadingSpinner /> : \"\"}\r\n        </div>\r\n        <div className=\"py-5\" id=\"intro\">\r\n          <h1>Datasheet Preview</h1>\r\n        </div>\r\n        <div id=\"product\"></div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport {BrowserRouter, Switch, Route} from 'react-router-dom';\r\n\r\nimport Home from './pages/Home';\r\nimport './App.css';\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <BrowserRouter>\r\n        <Switch>\r\n          <Route path=\"/\" exact component={Home} />\r\n        </Switch>\r\n      </BrowserRouter>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","import React, {createContext, useState} from 'react';\r\n\r\nexport const UserContext = createContext(null);\r\n\r\nexport default ({children}) => {\r\n    const [user, setUser] = useState(null);\r\n\r\n    return (\r\n        <UserContext.Provider value={{user, setUser}}>\r\n            {children}\r\n        </UserContext.Provider>\r\n    )\r\n}","import React from 'react';\r\nimport * as ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport UserContextProvider from './context/UserContext';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <UserContextProvider>\r\n      <App />\r\n    </UserContextProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}